{
  "title": "Solar AC Controller",
  "config": {
    "step": {
      "user": {
        "title": "Solar AC Controller setup",
        "description": "Configure how the controller manages your AC zones based on solar production and grid usage.\n\nFields are grouped:\n1. What to Control: AC zones and optional master switch\n2. Sensors: Solar, grid, and AC power meters\n3. When to Activate: Solar thresholds for on/off\n4. Decision Tuning: Confidence and learned power\n5. Optional Features: Enable seasonal and comfort modes\n\nAll settings can be adjusted later from Options. Supports cooling and heating zones (heat / cool / on).",
        "data": {
          "ac_power_sensor": "AC Power Sensor",
          "grid_sensor": "Grid Import/Export Sensor",
          "solar_sensor": "Solar Production Sensor",
          "ac_switch": "Master AC Switch (optional)",
          "zones": "AC Zones (ordered)",
          "initial_learned_power": "Initial Learned Power (W)",
          "solar_threshold_on": "Solar ON Threshold (W)",
          "solar_threshold_off": "Solar OFF Threshold (W)",
          "very_cold_threshold": "Very Cold Threshold (°C)",
          "chilly_threshold": "Chilly Threshold (°C)",
          "comfortable_threshold": "Comfortable Threshold (°C)",
          "enable_temperature_modulation": "Enable Comfort-Based Zone Control",
          "max_temp_winter": "Winter Comfort Target (°C)",
          "min_temp_summer": "Summer Comfort Target (°C)",
          "zone_temp_sensors": "Zone Temperature Sensors (optional)",
          "panic_threshold": "Panic Threshold (W)",
          "panic_delay": "Panic Delay (seconds)",
          "manual_lock_seconds": "Manual Override Lock Duration (seconds)",
          "short_cycle_on_seconds": "Short Cycle ON Protection (seconds)",
          "short_cycle_off_seconds": "Short Cycle OFF Protection (seconds)",
          "action_delay_seconds": "Action Delay (seconds)",
          "add_confidence": "Add Confidence Threshold",
          "remove_confidence": "Remove Confidence Threshold",
          "enable_diagnostics_sensor": "Diagnostics Sensor (full state)"
        },
        "data_description": {
          "ac_power_sensor": "Sensor that reports the AC unit's current power draw.",
          "grid_sensor": "Sensor showing grid import/export (negative = export).",
          "solar_sensor": "Sensor showing solar production.",
          "ac_switch": "Optional switch that powers the AC system. Leave empty if unmanaged.",
          "zones": "List of climate or switch entities to control. Order determines activation priority.",
          "initial_learned_power": "Starting estimate of zone power before learning.",
          "solar_threshold_on": "Solar power must exceed this to enable the AC master switch.",
          "solar_threshold_off": "Solar power must fall below this to disable the master switch.",
          "very_cold_threshold": "Temperature at or below this is very cold. Used for banded learning in each season.",
          "chilly_threshold": "Temperature between this and very cold threshold is chilly. Used for banded learning in each season.",
          "comfortable_threshold": "Temperature between this and chilly threshold is comfortable. Above this is very hot. Used for banded learning in each season.",
          "enable_temperature_modulation": "Requires zone temperature sensors. Blocks zone removal until comfort targets are reached (winter max/summer min).",
          "max_temp_winter": "Heating comfort cutoff; zones stay on until reaching this temperature in heat mode.",
          "min_temp_summer": "Cooling comfort cutoff; zones stay on until reaching this temperature in cool mode.",
          "zone_temp_sensors": "Mapping from each zone to its indoor temperature sensor. Used with temperature modulation to prevent premature zone removal.",
          "panic_threshold": "If grid import exceeds this for panic_delay seconds with multiple zones active, zones are shed sequentially.",
          "panic_delay": "Seconds of sustained high import before panic shedding begins.",
          "manual_lock_seconds": "If user manually toggles a zone via Home Assistant UI, it is locked from controller changes for this duration.",
          "short_cycle_on_seconds": "Minimum time a zone must stay ON before controller can turn it OFF (prevents rapid cycling).",
          "short_cycle_off_seconds": "Minimum time a zone must stay OFF before controller can turn it ON (prevents rapid cycling).",
          "action_delay_seconds": "Minimum delay between consecutive zone commands (including heat/cool mode changes) to avoid rapid sequencing.",
          "add_confidence": "Minimum confidence score needed to add a new zone. Higher = more conservative.",
          "remove_confidence": "Minimum negative confidence score needed to remove a zone. Higher = harder to remove."
        }
      },
      "timing": {
        "title": "Timing & Protection",
        "description": "Configure delays, manual lock, short-cycle guards, and panic shedding thresholds.",
        "data": {
          "action_delay_seconds": "Action Delay (seconds)",
          "manual_lock_seconds": "Manual Override Lock Duration (seconds)",
          "short_cycle_on_seconds": "Short Cycle ON Protection (seconds)",
          "short_cycle_off_seconds": "Short Cycle OFF Protection (seconds)",
          "panic_threshold": "Panic Threshold (W)",
          "panic_delay": "Panic Delay (seconds)"
        },
        "data_description": {
          "action_delay_seconds": "Minimum delay between consecutive zone commands (including heat/cool mode changes) to avoid rapid sequencing.",
          "manual_lock_seconds": "If user manually toggles a zone via Home Assistant UI, it is locked from controller changes for this duration.",
          "short_cycle_on_seconds": "Minimum time a zone must stay ON before controller can turn it OFF (prevents rapid cycling).",
          "short_cycle_off_seconds": "Minimum time a zone must stay OFF before controller can turn it ON (prevents rapid cycling).",
          "panic_threshold": "If grid import exceeds this for panic_delay seconds with multiple zones active, zones are shed sequentially.",
          "panic_delay": "Seconds of sustained high import before panic shedding begins."
        }
      },
      "comfort": {
        "title": "Comfort-Based Zone Control",
        "description": "Map zones to indoor temperature sensors and set comfort targets used to gate zone removals.",
        "data": {
          "outside_temperature_sensor": "Outside Temperature Sensor (optional)",
          "zone_temp_sensors": "Zone Temperature Sensors (optional)",
          "max_temp_winter": "Winter Comfort Target (°C)",
          "min_temp_summer": "Summer Comfort Target (°C)"
        },
        "data_description": {
          "outside_temperature_sensor": "Optional outside temperature for banded learning (per temperature band).",
          "zone_temp_sensors": "Mapping from each zone to its indoor temperature sensor. Used with temperature modulation to prevent premature zone removal.",
          "max_temp_winter": "Heating comfort cutoff; zones stay on until reaching this temperature in heat mode.",
          "min_temp_summer": "Cooling comfort cutoff; zones stay on until reaching this temperature in cool mode."
        }
      }
    }
  },
  "options": {
    "step": {
      "init": {
        "title": "Solar AC Controller options",
        "description": "Adjust sensors, zones, thresholds, seasons, and safety settings.\n\nZone order determines activation priority. Panic settings protect your inverter from overload.",
        "data": {
          "ac_power_sensor": "AC Power Sensor",
          "grid_sensor": "Grid Import/Export Sensor",
          "solar_sensor": "Solar Production Sensor",
          "outside_temperature_sensor": "Outside Temperature Sensor (optional)",
          "ac_switch": "Master AC Switch (optional)",
          "zones": "AC Zones (ordered)",
          "initial_learned_power": "Initial Learned Power (W)",
          "solar_threshold_on": "Solar ON Threshold (W)",
          "solar_threshold_off": "Solar OFF Threshold (W)",
          "season_mode": "Season Mode (Heat/Cool)",
          "very_cold_threshold": "Very Cold Threshold (°C)",
          "chilly_threshold": "Chilly Threshold (°C)",
          "comfortable_threshold": "Comfortable Threshold (°C)",
          "enable_temperature_modulation": "Enable Comfort-Based Zone Control",
          "max_temp_winter": "Winter Comfort Target (°C)",
          "min_temp_summer": "Summer Comfort Target (°C)",
          "zone_temp_sensors": "Zone Temperature Sensors (optional)",
          "panic_threshold": "Panic Threshold (W)",
          "panic_delay": "Panic Delay (seconds)",
          "manual_lock_seconds": "Manual Override Lock Duration (seconds)",
          "short_cycle_on_seconds": "Short Cycle ON Protection (seconds)",
          "short_cycle_off_seconds": "Short Cycle OFF Protection (seconds)",
          "action_delay_seconds": "Action Delay (seconds)",
          "add_confidence": "Add Confidence Threshold",
          "remove_confidence": "Remove Confidence Threshold",
          "enable_diagnostics_sensor": "Diagnostics Sensor (full state)"
        },
        "data_description": {
          "solar_threshold_on": "Solar power must exceed this to enable the AC master switch.",
          "solar_threshold_off": "Solar power must fall below this to disable the master switch.",
          "season_mode": "Manually select heat or cool mode. The system does not auto-detect based on temperature.",
          "very_cold_threshold": "Temperature at or below this is very cold. Used for banded learning in each season.",
          "chilly_threshold": "Temperature between this and very cold threshold is chilly. Used for banded learning in each season.",
          "comfortable_threshold": "Temperature between this and chilly threshold is comfortable. Above this is very hot. Used for banded learning in each season.",
          "enable_temperature_modulation": "Requires zone temperature sensors. Blocks zone removal until comfort targets are reached (winter max/summer min).",
          "max_temp_winter": "Heating comfort cutoff; zones stay on until reaching this temperature in heat mode.",
          "min_temp_summer": "Cooling comfort cutoff; zones stay on until reaching this temperature in cool mode.",
          "zone_temp_sensors": "Mapping from each zone to its indoor temperature sensor. Used with temperature modulation to prevent premature zone removal.",
          "panic_threshold": "If grid import exceeds this for panic_delay seconds with multiple zones active, zones are shed sequentially.",
          "panic_delay": "Seconds of sustained high import before panic shedding begins.",
          "manual_lock_seconds": "If user manually toggles a zone via Home Assistant UI, it is locked from controller changes for this duration.",
          "short_cycle_on_seconds": "Minimum time a zone must stay ON before controller can turn it OFF (prevents rapid cycling).",
          "short_cycle_off_seconds": "Minimum time a zone must stay OFF before controller can turn it ON (prevents rapid cycling).",
          "action_delay_seconds": "Minimum delay between consecutive zone ON/OFF actions to avoid rapid sequencing.",
          "add_confidence": "Minimum confidence score needed to add a new zone. Higher = more conservative.",
          "remove_confidence": "Minimum negative confidence score needed to remove a zone. Higher = harder to remove.",
          "enable_diagnostics_sensor": "Creates a sensor exposing full state for troubleshooting."
        }
      },
      "timing": {
        "title": "Timing & Protection",
        "description": "Configure delays, manual lock, short-cycle guards, and panic shedding thresholds.",
        "data": {
          "action_delay_seconds": "Action Delay (seconds)",
          "manual_lock_seconds": "Manual Override Lock Duration (seconds)",
          "short_cycle_on_seconds": "Short Cycle ON Protection (seconds)",
          "short_cycle_off_seconds": "Short Cycle OFF Protection (seconds)",
          "panic_threshold": "Panic Threshold (W)",
          "panic_delay": "Panic Delay (seconds)"
        },
        "data_description": {
          "action_delay_seconds": "Minimum delay between consecutive zone ON/OFF actions to avoid rapid sequencing.",
          "manual_lock_seconds": "If user manually toggles a zone via Home Assistant UI, it is locked from controller changes for this duration.",
          "short_cycle_on_seconds": "Minimum time a zone must stay ON before controller can turn it OFF (prevents rapid cycling).",
          "short_cycle_off_seconds": "Minimum time a zone must stay OFF before controller can turn it ON (prevents rapid cycling).",
          "panic_threshold": "If grid import exceeds this for panic_delay seconds with multiple zones active, zones are shed sequentially.",
          "panic_delay": "Seconds of sustained high import before panic shedding begins."
        }
      },
      "comfort": {
        "title": "Comfort-Based Zone Control",
        "description": "Map zones to indoor temperature sensors and set comfort targets.\n\nFor each zone, you may optionally select an external temperature sensor:\n- Climate entities (heat pump, AC): Optional - will use built-in thermometer if no sensor selected\n- Switch/Fan entities: Mandatory - must provide external temperature sensor\n\nIf a zone's temperature is unavailable, it is treated as not at target (keeps zone on).",
        "data": {
          "zone_temp_sensors": "Zone Temperature Sensors (optional for climate, mandatory for switch/fan)",
          "zone_manual_power": "Zone Manual Power Override (Watts, comma-separated)",
          "max_temp_winter": "Winter Comfort Target (°C)",
          "min_temp_summer": "Summer Comfort Target (°C)"
        },
        "data_description": {
          "zone_temp_sensors": "Sensors are matched to zones by position (Zone 1 → Sensor 1, Zone 2 → Sensor 2, etc). Leave blank for climate entities to auto-use built-in thermometer.",
          "zone_manual_power": "Optional fixed power per zone (comma-separated: 1000, 2000, 1500). Leave blank to use learned power. Useful for non-AC zones like electric radiators.",
          "max_temp_winter": "Heating comfort cutoff; zones stay on until reaching this temperature in heat mode.",
          "min_temp_summer": "Cooling comfort cutoff; zones stay on until reaching this temperature in cool mode."
        }
      }
    },
    "error": {
      "no_zones": "You must define at least one zone.",
      "zone_temp_sensors_mismatch": "Number of zone temperature sensors must match number of zones (or leave empty).",
      "invalid_solar_hysteresis": "Solar OFF threshold must be lower than Solar ON threshold.",
      "invalid_bands": "Temperature thresholds must increase (very cold < chilly < comfortable).",
      "panic_too_low": "Panic threshold should be safely above the Solar ON threshold.",
      "missing_temp_sensors_non_climate": "Switch/Fan entities require external temperature sensors. Climate entities may leave the sensor blank to use built-in thermometer."
    }
  }
}
